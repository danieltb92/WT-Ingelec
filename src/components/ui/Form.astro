---
import { Image } from "astro:assets";
import decorForm from "@/assets/pics/contact1.webp";
import Button from "@/components/ui/Button.astro";
---

<div
  class="flex flex-col relative justify-start items-start p-[30px] lg:p-16 bg-[#cfdce6] lg:bg-transparent rounded-[15px] overflow-hidden"
>
  <h2 class="text-3xl pl-0 md:pl-6 pt-3">Contáctanos</h2>
  <form
    class="px-0 py-6 sm:p-6 h-full w-full lg:max-w-lg"
    action="https://formsubmit.co/comercial@wtingelec.com.co"
    method="POST"
  >
    <!-- <div class="flex flex-col sm:flex-row gap-[35px] sm:items-center mb-10">
      <div class="flex items-center gap-[14px]">
        <input
          type="checkbox" 
          id="checkbox1"
          name="checkbox1"
          class="form-checkbox text-black"
        />
        <label for="checkbox1" class="text-black">Dí Hola</label>
      </div>
      <div class="flex items-center gap-[14px]">
        <input
          type="checkbox"
          id="checkbox2"
          name="checkbox2"
          class="form-checkbox text-black"
        />
        <label for="checkbox2" class="flex items-center text-black"
          >Get a Quote</label
        >
      </div>
    </div> -->

    <div class="mb-4">
      <label for="name" class="block text-black mb-2">Nombre y Apellido*</label>
      <input
        type="text"
        id="name"
        name="name"
        placeholder="Nombre y Apellido"
        required
        class="w-full px-[30px] py-[18px] border border-black rounded-[14px] text-black outline-none"
      />
    </div>

    <div class="mb-4">
      <label for="email" class="block text-black mb-2">Correo*</label>
      <input
        type="email"
        id="email"
        name="email"
        placeholder="Correo"
        required
        class="w-full px-[30px] py-[18px] border border-black rounded-[14px] text-black outline-none"
      />
      <input
        type="hidden"
        name="_next"
        value="https://yourdomain.co/thanks.html"
      />
    </div>

    <div class="mb-4">
      <label for="phone" class="block text-black mb-2">Teléfono*</label>
      <input
        type="tel"
        id="phone"
        name="phone"
        placeholder="Teléfono"
        autocomplete="tel"
        inputmode="numeric"
        pattern="^\+?[0-9\s\-\(\)]{7,20}$"
        required
        class="w-full px-[30px] py-[18px] border border-black rounded-[14px] text-black outline-none"
      />
    </div>

    <div class="mb-4">
      <label for="message" class="block text-black mb-2">Mensaje*</label>
      <textarea
        id="message"
        name="message"
        placeholder="Escribe tu mensaje aquí..."
        rows="4"
        required
        class="w-full px-[30px] py-[18px] border border-black rounded-[14px] text-black outline-none"
      ></textarea>
    </div>

    <Button
      variant="primary"
      type="submit"
      name="submit"
      class="w-full border border-[var(--blue)] hover:border-black"
    >
      Enviar
    </Button>
  </form>
  <picture
    class="absolute w-full right-[-20%] bottom-[10%] xl:bottom-[0%] hidden lg:block scale-x-[-1]"
  >
    <Image src={decorForm} alt="decor" />
  </picture>
</div>
<style>
  .form-checkbox {
    appearance: none;
    width: 28px;
    height: 28px;
    border: 1px solid #000;
    border-radius: 50%;
    outline: none;
    cursor: pointer;
    position: relative;
  }

  .form-checkbox:before {
    content: "";
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    position: absolute;
    top: 0;
    left: 0;
    background: var(--green);
    transform: scale(0);
    transition: transform 0.1s ease-in-out;
  }

  .form-checkbox:checked:before {
    transform: scale(0.6);
  }
</style>
<script>
  function formSetup() {
    var cb1 = document.getElementById("checkbox1") as HTMLInputElement;
    var cb2 = document.getElementById("checkbox2") as HTMLInputElement;
    var message = document.getElementById("message") as HTMLInputElement;

    if (cb1 && cb2) {
      cb1.checked = true;

      cb2.addEventListener("change", function () {
        if (cb2.checked) {
          cb1.checked = false;
          message.value =
            "Estamos interesados en sus servicios! Por favor, contáctenos";
        } else {
          message.value = "";
          cb1.checked = true;
        }
      });
      cb1.addEventListener("change", function () {
        if (cb1.checked) {
          cb2.checked = false;
          message.value = "";
        } else {
          cb2.checked = true;
          message.value =
            "Estamos interesados en sus servicios! Por favor, contáctenos";
        }
      });
    }
  }

  formSetup();
  document.addEventListener("astro:after-swap", formSetup);
</script>
